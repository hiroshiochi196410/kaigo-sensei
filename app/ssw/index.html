<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ä»‹è­·ãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ã‚¤AIï½œè©¦ç”¨åˆ¶é™ï¼‹è§£é™¤ã‚³ãƒ¼ãƒ‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      margin: 20px;
      line-height: 1.6;
    }
    h1 { margin-bottom: 0.3em; }
    .box {
      border: 1px solid #ccc;
      padding: 14px;
      border-radius: 10px;
      margin-top: 16px;
    }
    .lock {
      background: #fff3f3;
      border-color: #ffb3b3;
    }
    .ok {
      background: #f3fff3;
      border-color: #9be29b;
    }
    input {
      padding: 8px;
      width: 200px;
      font-size: 16px;
    }
    button {
      padding: 8px 14px;
      font-size: 16px;
      margin-left: 6px;
      cursor: pointer;
    }
    .msg {
      margin-top: 8px;
      color: #c00;
    }
  </style>
</head>
<body>

<h1>ä»‹è­·ãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ã‚¤AI</h1>
<p>è©¦ç”¨å›æ•°ï¼ˆ3å›ï¼‰ãŒçµ‚äº†ã—ã¾ã—ãŸã€‚</p>
<p>æœ¬æ ¼åˆ©ç”¨ã‚’ç¶šã‘ã‚‹ã«ã¯ <strong>è§£é™¤ã‚³ãƒ¼ãƒ‰</strong> ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>

<!-- ğŸ”’ ãƒ­ãƒƒã‚¯ä¸­ -->
<div id="trialBox" class="box lock">
  <strong>ğŸ”’ åˆ©ç”¨åˆ¶é™ä¸­</strong>
  <p>è§£é™¤ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
  <input type="text" id="unlockInput" placeholder="è§£é™¤ã‚³ãƒ¼ãƒ‰" />
  <button onclick="unlock()">è§£é™¤</button>
  <div id="unlockMsg" class="msg"></div>
</div>

<!-- âœ… è§£é™¤å¾Œ -->
<div id="unlockedBox" class="box ok" style="display:none;">
  <strong>âœ… æœ¬æ ¼åˆ©ç”¨ãŒæœ‰åŠ¹ã§ã™</strong>
  <p>å¼•ãç¶šãã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚</p>
  <button onclick="resetUnlock()">è§£é™¤ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆç®¡ç†ç”¨ï¼‰</button>
</div>

<script>
/*
  trainee / ssw ã‚’URLã§è‡ªå‹•åˆ¤å®š
  ä¾‹ï¼š
   /trainee/index.html â†’ trainee
   /ssw/index.html     â†’ ssw
*/
const VARIANT = location.pathname.includes("ssw") ? "ssw" : "trainee";
const STORAGE_KEY = "kaigo_unlocked_" + VARIANT;

/*
  ç°¡æ˜“è§£é™¤ã‚³ãƒ¼ãƒ‰ï¼ˆå¾Œã§Stripe Webhookã«å·®ã—æ›¿ãˆå¯èƒ½ï¼‰
*/
const VALID_CODES = [
  "KAIGO-2026",
  "TRAINEE-OK",
  "SSW-OK"
];

function unlock() {
  const input = document.getElementById("unlockInput").value.trim();
  if (VALID_CODES.includes(input)) {
    localStorage.setItem(STORAGE_KEY, "unlocked");
    showUnlocked();
  } else {
    document.getElementById("unlockMsg").innerText = "è§£é™¤ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“";
  }
}

function showUnlocked() {
  document.getElementById("trialBox").style.display = "none";
  document.getElementById("unlockedBox").style.display = "block";
}

function resetUnlock() {
  localStorage.removeItem(STORAGE_KEY);
  location.reload();
}

/* åˆæœŸåˆ¤å®š */
if (localStorage.getItem(STORAGE_KEY)) {
  showUnlocked();
}
</script>

</body>
</html>
