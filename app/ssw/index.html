<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>介護ロールプレイAI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
body{font-family:sans-serif;margin:16px}
textarea{width:100%;min-height:90px}
section{margin-bottom:16px}
button{margin-right:8px}
.output{border:1px solid #ccc;padding:8px;min-height:60px}
</style>
</head>
<body>

<h2>介護ロールプレイAI</h2>

<section>
<label>介護士（あなた）の発話（日本語）</label><br/>
<textarea id="jpInput" placeholder="例：大丈夫です。ここは安全です。"></textarea>
</section>

<section>
<label>介護士発話（ローマ字）</label>
<div id="romaOut" class="output"></div>
</section>

<section>
<button id="btnSend">送信</button>
<button id="btnStage2">Stage2だけ実行</button>
</section>

<section>
<h3>Stage2（推奨返答）</h3>
<b>ローマ字</b>
<div id="romaReply" class="output"></div>
<b>インドネシア語</b>
<div id="idReply" class="output"></div>
</section>

<script>
function toRomajiSentence(jp){
  const map = {
    "大丈夫です。":"Daijoubu desu.",
    "ここは安全です。":"Koko wa anzen desu.",
    "何が一番心配ですか？":"Nani ga ichiban shinpai desu ka?",
    "教えてください。":"Oshiete kudasai."
  };
  return map[jp] || jp;
}

function safe(id){ return document.getElementById(id); }

function bind(){
  const jp = safe("jpInput");
  const romaOut = safe("romaOut");
  const romaReply = safe("romaReply");
  const idReply = safe("idReply");
  const btnSend = safe("btnSend");
  const btnStage2 = safe("btnStage2");

  if(jp){
    jp.addEventListener("input", function(){
      romaOut.textContent = toRomajiSentence(jp.value.trim());
    });
  }

  if(btnSend){
    btnSend.addEventListener("click", function(){
      romaReply.textContent = "Yakan no mimamori taisei o kyoka shi, haikai no risuku o herasu tame no taisaku o oshiete itadakemasu ka?";
      idReply.textContent = "Bisakah Anda menjelaskan langkah-langkah konkret untuk meningkatkan pengawasan malam dan mengurangi risiko berkeliaran?";
    });
  }

  if(btnStage2){
    btnStage2.addEventListener("click", function(){
      romaReply.textContent = "Nani ga ichiban shinpai desu ka? Oshiete kudasai.";
      idReply.textContent = "Apa yang paling Anda khawatirkan? Tolong beri tahu kami.";
    });
  }
}

document.addEventListener("DOMContentLoaded", bind);
</script>

</body>
</html>
