<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>kaigo-sensei B 改善パッケージ</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans JP",sans-serif;padding:24px;line-height:1.6;}
    a{display:inline-block;margin-right:16px;}
    .card{border:1px solid #e5e7eb;border-radius:14px;padding:16px;max-width:760px;background:#fff;}
    body{background:#f6f7f9;margin:0;}
  </style>
</head>
<body>
  <div class="card">
    <h2>kaigo-sensei Phase2 B（改善テンプレ）</h2>
    <p>入口：</p>
    <p>
      <a href="./trainee/">trainee</a>
      <a href="./ssw/">ssw</a>
    </p>
    <p id="auto" style="color:#374151;"></p>
    <p>README.md に、組み込み方法と前提APIを書いています。</p>
  </div>

  <script>
    // 「壊れた」に見えないように、最後に開いた入口へ自動遷移（なければ trainee）。
    // 入口をクリックした時に localStorage を更新しておく。
    (function () {
      function setLast(v){ try{ localStorage.setItem('ks_last_entry', v); }catch(e){} }
      document.querySelectorAll('a[href]').forEach(function(a){
        a.addEventListener('click', function(){
          if (a.getAttribute('href').indexOf('ssw') !== -1) setLast('ssw');
          if (a.getAttribute('href').indexOf('trainee') !== -1) setLast('trainee');
        });
      });

      var last = 'trainee';
      try{ last = localStorage.getItem('ks_last_entry') || 'trainee'; }catch(e){}
      var target = (last === 'ssw') ? './ssw/' : './trainee/';

      var el = document.getElementById('auto');
      if (el) el.textContent = '自動で ' + (last === 'ssw' ? 'ssw' : 'trainee') + ' を開きます…';

      // 少し待ってから遷移（ブラウザの戻るで戻れなくならないように replace）
      setTimeout(function(){
        if (location.pathname.endsWith('/') || location.pathname.endsWith('index.html')) {
          location.replace(target);
        }
      }, 700);
    })();
  </script>
</body>
</html>
